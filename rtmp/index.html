<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Live Stream</title>
</head>

<body>
  <h2>Live Stream</h2>
  <video id="video" width="800" controls></video>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script>
    var video = document.getElementById("video");
    var videoSrc = "/hls/jn.m3u8";  // Changed from test to jn
    if (Hls.isSupported()) {
      var hls = new Hls({
        debug: true,  // Enable debugging for troubleshooting
        enableWorker: true,
        lowLatencyMode: true
      });

      hls.loadSource(videoSrc);
      hls.attachMedia(video);

      hls.on(Hls.Events.MANIFEST_PARSED, function () {
        video.play();
      });

      // Add error logging
      hls.on(Hls.Events.ERROR, function (event, data) {
        console.error('HLS error:', data);
      });
    }
    else if (video.canPlayType("application/vnd.apple.mpegurl")) {
      video.src = videoSrc;
      video.addEventListener('loadedmetadata', function () {
        video.play();
      });
    }
  </script>
</body>

</html>